<section class="containService">
  <app-alert class="alertCenter" [alertUrlIcon]="alertUrlIcon" [alertShow]="alertShow" [alertHeader]="alertHeader" [alertTitle]="alertTitle" [alertSubtitle]="alertSubtitle"></app-alert>
  
  <!-- client -->
  <form class="p-3" #myForm="ngForm" *ngIf="viewActual === USER">
    <div class="containService__data">
      <div class="whenService d-flex justify-content-between pb-2">
        <div class="client">
          <div class="input__contain mr-4">
            <label for="">N° cliente registrado</label>
            <select (change)="$event.target.value.length > 0 ? searchClient($event.target.value) : clearClient(myForm)" class="w-100" name="searchNameClient" [(ngModel)]="searchNameClient" *ngIf="allClients">
              <option value="">Buscalo</option>
              <option *ngFor="let option of allClients" value="{{option.numClient}}">{{option.name}}</option>
            </select>  
            <p *ngIf="!allClients" class="no-exist"><b>No existen Clientes</b></p>  
          </div>
          <div class="input__contain">
            <label for="">N° cliente nuevo</label>
            <input (focusout)="compareClient(myForm)" class="w-75" type="text" pattern="^[0-9]*$" placeholder="Registralo" name="nameUser" #nameUser="ngModel" [(ngModel)]="newClient.numClient">
          </div>
        </div>
      </div>
      <div class="dataService d-flex justify-content-between pt-4 pb-2">
        <div class="input__contain name">
          <label for="">Nombre(s)</label>
          <input type="text" placeholder="Nombre" name="names" [(ngModel)]="newClient.name" required>
        </div>
        <div class="input__contain">
          <label for="">Apellido Paterno</label>
          <input type="text" placeholder="Apellido Paterno" name="lastname" [(ngModel)]="newClient.lastName" required>
        </div>
        <div class="input__contain">
          <label for="">Apellido Materno</label>
          <input type="text" placeholder="Apellido Materno" name="lastnameMother" [(ngModel)]="newClient.motherLastName" required>
        </div>
        <div class="input__contain name">
          <label for="">Nombre empresa</label>
          <input type="text" placeholder="Nombre" name="nameCompany" [(ngModel)]="newClient.nameCompany" required>
        </div>
      </div>
      <div class="dataService d-flex justify-content-between pt-4 pb-2">
        <div class="input__contain name">
          <label for="">NIF</label>
          <input type="text" placeholder="A0000000" name="nif" [(ngModel)]="newClient.nif" required>
        </div>
        <div class="input__contain">
          <label for="">Correo Electrónico</label>
          <input type="email" pattern="[\w0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" placeholder="correo@correo.com" name="email" [(ngModel)]="newClient.email" required>
        </div>
        <div class="input__contain">
          <label for="">Teléfono 1</label>
          <input type="text" minlength="7" pattern="^[0-9]*$" placeholder="000 000 000" name="numberOne" [(ngModel)]="newClient.phoneOne" required>
        </div>
        <div class="input__contain">
          <label for="">Teléfono 2</label>
          <input type="text" minlength="7" pattern="^[0-9]*$" placeholder="000 000 000" name="numberTwo" [(ngModel)]="newClient.phoneTwo" required>
        </div>
      </div>
      
      <div class="direccion">
        <h3 class="title">DIRECCIÓN (De quien contrata el servicio)</h3>
        <div class="direccion__contain">
          <div class="d-flex justify-content-between align-items-center flex-wrap">
            <div class="input__contain">
              <label for="">Dirección</label>
              <input type="text" class="w-200" placeholder="Dirección" name="localitation" [(ngModel)]="newClient.direction" required>
            </div>
            <div class="input__contain">
              <label for="">Número externo</label>
              <input type="text" class="max-width-95" placeholder="00" name="numExt" [(ngModel)]="newClient.numberExternal" required>
            </div>
            <div class="input__contain">
              <label for="">Número interno</label>
              <input type="text" class="max-width-95" placeholder="00" name="numInt" [(ngModel)]="newClient.numberInternal" required>
            </div>
            <div class="input__contain">
              <label for="">Provincia</label>
              <input class="w-200" name="province" [(ngModel)]="newClient.province" required>
            </div>
          </div>
          <div class="d-flex align-items-center flex-wrap pt-4">
            <div class="input__contain mr-12">
              <label for="">Municipio</label>
              <input class="w-100" name="municipalityService" [(ngModel)]="newClient.municipality">
            </div>
            <div class="input__contain code">
              <label for="">Código postal</label>
              <input class="w-100" type="text" placeholder="Código postal" name="postalcode" [(ngModel)]="newClient.postalCode" required>
            </div>
          </div>
        </div>
      </div>
    </div>
    <aside class="siguiente-container containService__aside">
      <div>
        <div class="buttons d-flex justify-content-center align-items-center">
          <button  class="buttonSave" (click)="updateView(SERVICEDIRECTION)">
            Siguiente
          </button>
        </div>
        <div class="d-flex justify-content-center align-items-center">
          <input id="input-same-client" type="checkbox" class="spanDirectionEqual" [(ngModel)]="sameDirection" [ngModelOptions]="{standalone: true}">
          <label for="input-same-client" class="client-checkbox">¿El cliente que registras recibirá el servicio?</label>
        </div>
      </div>
    </aside>
  </form>

  <!-- service -->

  
  <div class="d-flex  align-items-center flex-wrap w-100 p-5" *ngIf="viewActual === SERVICEDIRECTION">

    <div class="containService__data direccion  ">
      <h3 class="title">DATOS GENERALES (De quien recibe el servicio)</h3>
      <div class="direccion__contain">
        <div class="d-flex justify-content-between align-items-center flex-wrap">
          <div class="input__contain">
            <label for="">Nombre (s)</label>
            <input type="text" class="w-100" placeholder="Nombres" name="directionService" [(ngModel)]="newService.name" required>
          </div>
          <div class="input__contain">
            <label for="">Apellido Paterno</label>
            <input type="text" class="w-200" placeholder="Apellido Paterno" name="directionService" [(ngModel)]="newService.lastName" required>
          </div>
          <div class="input__contain">
            <label for="">Apellido Materno</label>
            <input type="text" class="w-200" placeholder="Apellido Materno" name="directionService" [(ngModel)]="newService.motherLastName" required>
          </div>
        </div>
        <div class="d-flex justify-content-between align-items-center flex-wrap pt-4">
          <div class="input__contain">
            <label for="">Correo electrónico</label>
            <input type="email" class="w-200" placeholder="correo@correo.com" name="directionService" [(ngModel)]="newService.email" required>
          </div>
          <div class="input__contain">
            <label for="">Teléfono 1</label>
            <input type="tel" placeholder="000 000 000" class="w-200" name="numExtService" [(ngModel)]="newService.phoneOne" required>
          </div>
          <div class="input__contain">
            <label for="">Teléfono 2</label>
            <input type="tel" placeholder="000 000 000" class="w-200" name="numExtService" [(ngModel)]="newService.phoneTwo" required>
          </div>
        </div>
      </div>
    </div>

    <div class="containService__data direccion">
      <h3 class="title">DIRECCIÓN (De quien recibe el servicio)</h3>
      <div class="direccion__contain">
        <div class="d-flex justify-content-between align-items-center flex-wrap">
          <div class="input__contain">
            <label for="">Dirección</label>
            <input type="text" class="w-200" placeholder="Dirección" name="directionService" [(ngModel)]="newService.direction" required>
          </div>
          <div class="input__contain">
            <label for="">Número externo</label>
            <input type="text" placeholder="00" class="max-width-95" name="numExtService" [(ngModel)]="newService.numberExternal" required>
          </div>
          <div class="input__contain">
            <label for="">Número interno</label>
            <input type="text" placeholder="00" class="max-width-95" name="numIntService" [(ngModel)]="newService.numberInternal" required>
          </div>
          <div class="input__contain">
            <label for="">Provincia</label>
            <input class="w-200" name="provinceService" [(ngModel)]="newService.province" required>
          </div>
        </div>
        <div class="d-flex align-items-center flex-wrap pt-4">
          <div class="input__contain mr-12">
            <label for="">Municipio</label>
            <input class="w-100" name="municipalityService" [(ngModel)]="newService.municipality">
          </div>
          <div class="input__contain code">
            <label for="">Código postal</label>
            <input class="w-100" type="text" placeholder="Código postal" name="postalcodeService" [(ngModel)]="newService.postalCode" required>
          </div>
        </div>
      </div>
    </div>
    <div class="containService__aside flex-column">
      <div class="buttons w-50 d-flex align-items-center">
        <button  class="buttonSave" (click)="viewActual = SERVICE">
          Siguiente
        </button>
      </div>
      <div class="buttons w-50 d-flex align-items-center">
        <button  class="buttonBefore" (click)="viewActual = USER">
          Atras
        </button>
      </div>
    </div>
  </div>
  <form class="p-3" *ngIf="viewActual === SERVICE">
    <div class="containService__data pt-6x100">
      <div>
        <h3 class="title">DATOS DEL SERVICIO</h3>
      </div>
      <div class="d-flex justify-content-between flex-wrap mt-4">
        <div class="d-flex justify-content-between align-items-center flex-wrap w-100">
          <div class="input__contain dateContain">
            <label for="" class="w-50">N° de Servicio</label>
            <input class="w-100" type="text" placeholder="000000" name="numDeliveryNote" [(ngModel)]="newService.numService" required>
          </div>
          <div class="input__contain dateContain">
            <label for="" class="w-50">N° de Factura</label>
            <input class="w-100" type="text" placeholder="000000" name="numBill" [(ngModel)]="newService.numBill" required>
          </div>
          <div class="input__contain">
            <label for="" class="color-red">Urgente</label>
            <select class="border-red" name="priority" [(ngModel)]="newService.priority" required>
              <option value="true">SI</option>
              <option value="false">NO</option>
            </select>
          </div>
        </div>
        <div class="statusService d-flex justify-content-between flex-wrap w-100 pt-4">
          <div class="input__contain">
            <label for="">Importe</label>
            <input type="text" pattern="^[0-9]*$" placeholder="0000 €" name="amount" [(ngModel)]="newService.amount" required>
          </div>
          <div class="input__contain">
            <label for="">Tipo IVA</label>
            <select class="w-100" name="status" [(ngModel)]="newService.typeIva" required>
              <option value="10">Reducido</option>
              <option value="21">Normal</option>
            </select>
          </div>
          <div class="input__contain">
            <label for="">Estado</label>
            <select class="w-100" name="status" [(ngModel)]="newService.status" required>
              <option value="">Selecciona un estado</option>
              <option *ngFor="let option of optionsStatus" [value]="option">{{option}}</option>
            </select>
          </div>
          <div class="input__contain activities">
            <label>Actividad</label>
            <div class="input-activities">
              <ng-multiselect-dropdown
                [settings]="dropdownSettings"
                [placeholder]="'Selecciona la(s) actividad(es)'"
                [data]="dropdownList"
                [(ngModel)]="selectedItems"
                [ngModelOptions]="{standalone: true}"
              >
              </ng-multiselect-dropdown> 
            </div>
          </div>
  
        </div>
        <div class="descriptionService w-100 d-flex justify-content-center pt-3">
          <div class="input__contain w-75 mr-5">
            <label for="">Descripción</label>
            <textarea class="w-100 h-85" name="description" [(ngModel)]="newService.description" cols="30" rows="10" placeholder="Descripción del trabajo sin Nota interna" required></textarea>
          </div>
          <div class="input__contain">
            <label for="">Incluye <b>Nota interna</b></label>
            <textarea class="w-100 h-85" name="note" [(ngModel)]="newService.note" cols="30" rows="10" placeholder="escribe una breve nota interna"></textarea>
          </div>
        </div>
      </div>
    </div>
    <aside class="containService__aside saveService flex-column">
      <div class="mt-3">
        <div class="buttons w-50 d-flex align-items-center">
          <button  class="buttonSave" (click)="createClientAndService()">
            Guardar <br>
          </button>
        </div>
        <div class="buttons w-50 d-flex align-items-center">
          <button class="buttonBefore" (click)="viewActual = SERVICEDIRECTION">
            Atras
          </button>
        </div>
      </div>
    </aside>
  </form>
</section>